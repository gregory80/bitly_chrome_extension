<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" manifest="cache-manifest">

<!-- MIME TYPE Guidlines and references: http://hixie.ch/advocacy/xhtml -->
    <head>
        <title>bit.ly notification</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="awesome" />
        <meta name="description" content="" />
        <link rel="stylesheet" href="css/basic.css" type="text/css" charset="utf-8" />
        <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />                
    </head>
    <body>
        <div id="container">

            
        </div> <!-- end #container -->
        <div id="footer">
            <a class="trendsPage" href="#">Trends</a>
        </div>
    
        <script type="text/javascript" charset="utf-8">
            
            var bg = chrome.extension.getBackgroundPage(),
                notification_data = bg.get_latest_notifications(),
                latest = notification_data && notification_data.shift(), html = "";
            if(!latest) {
                container.innerHTML = "Oops, Sorry but an error happened"
            }
            console.log(notification_data);
            html += "<div>"
                html += latest.title || latest.long_url
            html += "</div>"        
            // html += "<div>"
            //     html += latest.long_url
            // html += "</div>"           
            html += "Past Hour: " + latest.trend_clicks;
            html += 'Total clicks: ' + latest.user_clicks;     
            
            document.querySelector(".trendsPage").addEventListener('click', function(e) {
                e.preventDefault();
                bg.get_chrome_page("trending.html");
            })
            container.innerHTML = html;
            bg.remove_notification();
            // now remove it from list...
        </script>

      
    </body>
</html>
